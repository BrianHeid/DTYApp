<!-- Main login page -->
<body>
  {{> App_body}}
</body>


<!-- Generic layout -->
<template name="App_body">
{{> Template.dynamic template=header}}

{{#if currentUser}}
	{{> Template.dynamic template=user_dashboard}}
{{else}}	
	{{> Template.dynamic template=logoff_dashboard}}
{{/if}}

{{> Template.dynamic template=main}}
{{> Template.dynamic template=bottom}}
{{> Template.dynamic template=footer}}  

</template>


<template name='main_page'>
	<!-- CSS -->
	<style>
		/* Shows pointer finger when hovered over "Register here" and "login" */
		a {
			cursor: pointer;
		}

		/* Add padding to top so menu doesn't overlap */
		#login-content {
			padding-top: 80px;
		}

		#createAccountHeader {
			text-align: center;
		}

	</style>

  	<center>
		<div id="login-content" class="ui raised very padded text container">
		  <div class="column">
		  	<img class="ui large centered image" src="/images/logo.png">
			<img class="ui large centered image" src="/images/slogan.png">

		    <h3 class="ui image header">
		      <div class="content centered">
		        Login to your account
		      </div>
		    </h3>
		    <form class="ui large form" id="loginForm">
		      <div class="ui stacked secondary segment">
		        <div class="field">
		          <div class="ui left icon input">
		            <i class="user icon"></i>
		            <input type="text" name="email" placeholder="E-mail address">
		          </div>
		        </div>
		        <div class="field">
		          <div class="ui left icon input">
		            <i class="lock icon"></i>
		            <input type="password" name="password" placeholder="Password">
		          </div>
		        </div>
		        <div class="ui fluid large submit button" style="color: white; background-color: #00bde8;">Login</div>
		      </div>

		      <div class="ui error message"></div>

		    </form>

		    <div class="register ui message">
		      New to Doctors To You? <a id='register'>Register here</a>
		    </div>
		  </div>
		</div>
	</center>


	<!-- REGISTER MODAL -->
	<div class="ui modal" id="createAccountModal">
		<i class="close icon"></i>
	  	<div class="header" id="createAccountHeader">
	  		Create an Account
	  	</div>

	  	<div class="content">
	  		<form id="registerForm" class="ui large form">

	  			<h4 class="ui dividing header">Basic Information</h4>

				<div class="column equal width fields">
					<div class="required field">
						<label>First Name</label>
						<input type="text" name="firstname" placeholder="First Name" autofocus>
					</div>
					<div class="field required">
						<label>Last Name</label>
						<input type="text" name="lastname" placeholder="Last Name">
					</div>
				</div>

				<div class="column equal width fields required">
					<div class="required field">
						<label>Phone Number</label>
						<input type="text" name="phonenumber" placeholder="Phone Number">
					</div>
				    <div class="required field">
						<label>Birthday</label>
						<input type="date" name="birthday" min="1887-01-01" max="1999-04-01">
					</div>
				</div>

				<h4 class="ui dividing header">Address</h4>

				<div class="column equal width fields">
					<div class="required field">
						<label>Street</label>
						<input type="text" name="street" id="street" placeholder="Street">
					</div>
					<div class="required field">
						<label>City</label>
						<input type="text" name="city" id="city" placeholder="City">
					</div>
				</div>

				<div class="column equal width fields">
					<div class="required field">
						<label>State</label>
						<input type="text" name="state" id="state" placeholder="State">
					</div>
					<div class="required field">
						<label>Country</label>
						{{>countriesList}}
					</div>
				</div>

				<div class="column equal width fields">
					<div class="required field">
						<label>Zipcode</label>
						<input type="text" name="zipcode" id="zipcode" placeholder="Zipcode" minlength="5">
					</div>
					<div class="field">
						<label>Apt # / Suite</label>
						<input type="text" name="aptNumSuite" id="aptNumSuite" placeholder="Apt # / Suite">
					</div>
				</div>

				<h4 class="ui dividing header">Account Settings</h4>

				<div class="field required">
					<label>Email</label>
					<input type="email" name="email" placeholder="example@gmail.com">
				</div>
				<div class="field required">
					<label>Password</label>
					<input type="password" name="password" placeholder="Password">
				</div>
				<div class="field required">
					<label>Confirm Password</label>
					<input type="password" name="password_confirm" placeholder="Confirm Password">
				</div>
				<div class="field required">
					<label>Where did you hear about us?</label>
					<select class="ui selection dropdown" name="acquisition" required>
						<option value="">I heard from...</option>
						<option value="print">Print advertisement</option>
						<option value="facebook">Facebook</option>
						<option value="instagram">Instagram</option>
						<option value="twitter">Twitter</option>
						<option value="friendOrFamily">Friends or family</option>
						<option value="Other">Other</option>
					</select>
				</div>

		    </form>
	  	</div>

	  	<div class="actions" id="actionBtns">
	    	<div class="ui two buttons">
			    <input id="createAccountBtn" class="ui primary approve button" type='submit' value='Create Account' onclick="">
			    <div id="cancelBtn" class="ui negative cancel button">Cancel</div>
			</div>
	  	</div>
	</div>

<script type="text/javascript">
	$(document).ready(function(){
		$("#register").click(function(){
				$("#createAccountModal").modal('setting', 'closable', false).modal('show');
			});
	});
		$('.ui.dropdown').dropdown();

	function validateRegistration(){
		this.$('#registerForm').form({
			inline: true,
			on: 'submit',
			transition: 'slide down',
			onSuccess: function(event,fields){
				event.preventDefault();
				// Accounts.createUser({
				// 	email: fields['email'],
				// 	password: fields['password'],
				// 	profile: {
				// 		firstname: fields['firstname'],
				// 		lastname: fields['lastname'],
				// 		status: 1,
				// 		viewing: "Request",
				// 		phonenumber: fields['phonenumber'],
				// 		address: fields['street'] + ' ' + fields['city'] + ' ' + fields['state'] + ' ' + fields['zipcode'],
				// 		birthday: fields['birthday']
				// 	}
				// })
				// console.log('Account created.....')
				// FlowRouter.go('/account')
			},
			fields: {
				firstname: {
					identifier : 'firstname',
					rules: [
					{
						type: 'empty',
						prompt: 'Please enter a first name.'
					},
					{
						type: 'regExp[/^[a-zA-Z]{3,20}$/]',
						prompt: 'Please enter a valid name.'
					}
					]
				},
				lastname: {
					identifier: 'lastname',
					rules: [
					{
						type: 'empty',
						prompt: 'Please enter a last name.'
					},
					{
						type: 'regExp[/^[a-zA-Z]{2,20}$/]',
						prompt: 'Please enter a valid name.'
					}
					]
				},
				phonenumber: {
					identifier: 'phonenumber',
					rules: [
					{
						type: 'empty',
						prompt: 'Please enter your primary phone number.'
					},
					{
						type: 'regExp[/^(\\+\\d{1,2}\\s)?\\(?\\d{3}\\)?[\\s.-]\\d{3}[\\s.-]\\d{4}$/]',
						prompt: 'Please enter a valid phone number.'
					}
					]
				},
				birthday: {
					identifier: 'birthday',
					rules: [
					{
						type: 'empty',
						prompt: 'Please enter your birthday.'
					}
					]
				},
				street:{
	                identifier: 'street',
	                rules:[
	                // {
	                //     type: 'regExp[/^\\d [A-Za-z ]* (?:Rd\\.)|(?:Dr\\.)|(?:St\\.)|(?:Ct\\.)$/]',
	                //     prompt: 'Please enter a valid street address.'
	                // },
	                {
	                    type: 'empty',
	                    prompt: 'Please enter a street address.'
	                }
	                ]
	            },
	            city:{
	                identifier: 'city',
	                rules:[
	                {
	                    type: 'regExp[/^[A-Za-z]{0,144}$/]',
	                    prompt: 'Please enter a valid city.'
	                },
	                {
	                    type: 'empty',
	                    prompt: 'Please enter a city.'
	                }
	                ]
	            },
	            state:{
	                identifier: 'state',
	                rules:[
	                {
	                    type: 'regExp[/^[A-Za-z]{2}$/]',
	                    prompt: 'Please enter a valid state.'
	                },
	                {
	                    type: 'empty',
	                    prompt: 'Please enter a state.'
	                }
	                ]
	            },
	            zipcode:{
	                identifier: 'zipcode',
	                rules: [
	                {
	                    type: 'regExp[/^[0-9]{5}$/]',
	                    prompt: 'Please enter a valid zip code.'
	                },
	                {
	                    type: 'empty',
	                    prompt: 'Please enter a zip code.'
	                }
	                ]
	            },
				email: {
					identifier : 'email',
					rules: [
					{
						type: 'empty',
						prompt: 'Please enter your e-mail'
					},
					{
						type: 'email',
						prompt: 'Please enter a valid e-mail'
					}
					]
				},
				password: {
					identifier : 'password',
					rules: [
						{
							type: 'empty',
							prompt: 'Please enter your password'
						},
						{
							type: 'length[6]',
							prompt: 'Your password must be at least 6 characters'
						}
					]
				},
				password_confirm: {
					identifier: 'password_confirm',
					rules: [
						{
							type: 'empty',
							prompt: 'Please enter in your password again.'
						},
						{
							type: 'length[6]',//'match[password]',
							prompt: 'Password does not match'
						}
					]
				},

				street: {
					identifier: 'street',
					rules: [
						{
							type: 'empty',
							prompt: 'Please enter in your street address.'
						},
						{	// Need to implement a better address validator, searc google geolocator or, another api
							type: 'regExp[/^[0-9]{1,5} [A-Za-z ]*(?:Rd\\.)|(?:Dr\\.)|(?:St\\.)|(?:Ct\\.)|(?:rd\\.)|(?:dr\\.)|(?:st\\.)|(?:ct\\.)|(?:ln\\.)$/]',
							prompt: 'Please enter a valid street address.'
						}
					]
				},
				city: {
					identifier: 'city',
					rules: [
						{
							type: 'empty',
							prompt: 'Please enter in your city.'
						},
						{
							type: 'regExp[/^[A-Za-z]*$/]',
							prompt: 'Please enter a valid city.'
						}
					]
				},
				state: {
					identifier: 'state',
					rules: [
						{
							type: 'empty',
							prompt: 'Please enter a state.'
						},
						{
							type: 'regExp[/^[A-Z]{2}$/]',
							prompt: 'Please enter in your state initials e.g. MD, VA, or DC'
						}
					]

				},
				zipcode: {
					identifier: 'zipcode',
					rules: [
						{
							type: 'empty',
							prompt: 'Please enter in your zipcode.'
						},
						{
							type: 'regExp[/^[0-9]{5}([ -.]?[0-9]{4})?$/]'
						}
					]
				},

				birthday: {
					identifier: 'birthday',
					rules: [
						{
							type: 'empty',
							prompt: "Please enter your date of birth."
						}
					]
				}
		}
		});
	}
</script>
</template>